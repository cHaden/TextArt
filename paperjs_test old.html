<!DOCTYPE html>
<html>
<head>

    <link href='http://fonts.googleapis.com/css?family=Erica+One|Passion+One:400,900|Playfair+Display+SC:400,900' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Emilys+Candy|Irish+Grover|Vast+Shadow|Monoton|Kranky' rel='stylesheet' type='text/css'>

    <meta charset="UTF-8">
    <title>Paper JS Test</title>
    <script type="text/javascript" src="./paperjs/dist/paper-full.js"></script>

</head>
<body>

    <!--hacky mcHackerson: trasparent div to make the google fonts load-->
    <div style="color: transparent; height: 1px;">
    <p style="font-family: Erica One">Erica One</p>
    <p style="font-family: Passion One">Passion One</p>
    <p style="font-family: Playfair Display SC">Playfair Display SC</p>

    <p style="font-family: Emilys Candy">Emilys Candy</p>
    <p style="font-family: Irish Grover">Irish Grover</p>
    <p style="font-family: Vast Shadow">Vast Shadow</p>
    <p style="font-family: Monoton">Monoton</p>
    <p style="font-family: Kranky">Kranky</p>
    </div>

    Please enter a name:<br>
    <input type="text" name="name" value="Some name" id="name">
    <br><br>
    Please select a color palette:<br>
    <input type="radio" name="palette" value="0" id="r0">0<br>
    <input type="radio" name="palette" value="1" id="r1">1<br>
    <input type="radio" name="palette" value="2" id="r2">2<br>
    <input type="radio" name="palette" value="3" id="r3">3<br>

     
    <script type="text/paperscript"  canvas="canvas">

//===============================================

var properties = {
//available color palettes
palettes: [
    ["#225378","#1695A3","#ACF0F2","#F3FFE2","#EB7F00"],
    ["#000000","#000000","#000000","#000000"]],
    //which color palette to use for text
    paletteIndex: 0,
    //which color palette to use for background blocks
 blockPaletteIndex: 0 //make this configurable later
};



//which color palette to use for text
//var paletteIndex = 0; //make this configurable later
//if( document.getElementById('r0').checked) paletteIndex=0;
//else if( document.getElementById('r1').checked) paletteIndex=1;
//else if( document.getElementById('r2').checked) paletteIndex=2;
//else if( document.getElementById('r3').checked) paletteIndex=3;


//transparency of background blocks
var blockAlpha = 0; 
//available fonts
var fonts = [["Erica One","Passion One","Playfair Display SC"],
    ["Emilys Candy", "Irish Grover", "Vast Shadow", "Monoton", "Kranky"]];
//which font set to use
var fontSet = 1;

//size of the square in the middle
var startSquare = 100; //make this configurable later
//height of each block
var textHeight = startSquare/2;
// amountToWorkWith = (view.bounds - startSquare) / 2
// (numberOfBlocks/4)
//increase textHeight in the outer boxes
var textIncrease = 1; 
// 1 = no difference 
// >1 = increase in size 
// <1 = decrease in size

//number of blocks (should be a multiple of 4)
var numberOfBlocks = 16; //make this configurable later

//set the background color
var background = new Path.Rectangle(view.bounds);
background.fillColor = "#111111";

//currentStartX: current leftmost edge of motif
var currentStartX = (view.bounds.width - startSquare)/2;
//currentStartY: current top edge of motif
var currentStartY = (view.bounds.width - startSquare)/2;

//currentEndX: current right edge of motif
var currentEndX = currentStartX + startSquare;
//currentEndY: current bottom edge of motif
var currentEndY = currentStartX + startSquare;

//text to be displayed
var name =  document.getElementById('name').value; //make this configurable later

//===============================================


for(var i=1; i <= numberOfBlocks; i++){

    switch(i%4){
    case 1:
        var point = new Point(currentStartX,currentStartY-textHeight);
        var size = new Size(currentEndX - currentStartX, textHeight);
        var rect = new Path.Rectangle(point, size);
        //rect.strokeColor = 'black';
        rect.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        rect.fillColor.alpha = blockAlpha;

        var text = new PointText(point);
        text.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        text.fontFamily = fonts[fontSet][Math.floor(Math.random()*fonts[fontSet].length)];
        text.content = name;
        text.fitBounds( rect.bounds );
        if(i != 1) {
            text.scale( size.width/text.bounds.width, 1);
        }

        currentStartY = currentStartY-textHeight;
        break;

    case 2: 
        var point = new Point(currentEndX,currentStartY);
        var size = new Size(textHeight,currentEndY-currentStartY+textHeight);
        var rect = new Path.Rectangle(point, size);
        //rect.strokeColor = 'black';
        rect.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        rect.fillColor.alpha = blockAlpha;

        var text = new PointText(new Point(currentEndX+textHeight,currentStartY));
        text.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        text.fontFamily = fonts[fontSet][Math.floor(Math.random()*fonts[fontSet].length)];
        text.content = name;
        text.rotate(90);
        text.fitBounds( rect.bounds );
        if(i != 2) {
            text.scale( 1, size.height/text.bounds.height );
        }

        currentEndX = currentEndX+textHeight;
        currentEndY = currentEndY+textHeight;
        break;

    case 3:
        var point = new Point(currentStartX-textHeight,currentEndY-textHeight);
        var size = new Size(currentEndX-currentStartX,textHeight);
        var rect = new Path.Rectangle(point, size);
        //rect.strokeColor = 'black';
        rect.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        rect.fillColor.alpha = blockAlpha;

        var text = new PointText(new Point(currentStartX-textHeight+(currentEndX-currentStartX),currentStartY));
        text.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        text.fontFamily = fonts[fontSet][Math.floor(Math.random()*fonts[fontSet].length)];
        text.content = name;
        text.rotate(180);
        text.fitBounds( rect.bounds );
        if(i != 3) {
            text.scale( size.width/text.bounds.width, 1 );
        }

        currentStartX = currentStartX-textHeight;
        break;

    case 0:
        var point = new Point(currentStartX,currentEndY-textHeight);
        var size = new Size(textHeight,-1*(currentEndY-currentStartY-textHeight));
        var rect = new Path.Rectangle(point, size);
        //rect.strokeColor = 'black';
        rect.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        rect.fillColor.alpha = blockAlpha;


        var text = new PointText(new Point(currentEndX,currentStartY));
        text.fillColor = properties.palettes[paletteIndex][Math.floor(Math.random()*properties.palettes[paletteIndex].length)];
        text.content = name;
        text.fontFamily = fonts[fontSet][Math.floor(Math.random()*fonts[fontSet].length)];
        text.rotate(270);
        text.translate(0,currentEndY-currentStartY-textHeight);
        text.fitBounds( rect.bounds );
        if(i != 4) {
            text.scale( 1, (size.height/text.bounds.height)*-1 );
        }

        textHeight = textHeight * textIncrease;
        break;
    }
}

//===============================================

</script>   
    <canvas id="canvas" height="600" width="600"></canvas>
</body>
</html>
